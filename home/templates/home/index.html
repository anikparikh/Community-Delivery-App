{% load static %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Kartpool</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Mapbox CSS -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.13.0/mapbox-gl.css' rel='stylesheet' />
    <link href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css' rel='stylesheet' />

    <!-- Custom styles -->
    <link rel="stylesheet" href="{% static 'home/css/styles.css' %}">
</head>
<body>
    <!-- Map container -->
    <div id="map" style="width: 100vw; height: 100vh;"></div>

    <!-- ✅ Wishlist input UI -->
    <div id="wishlist-container" style="position: absolute; top: 10px; left: 10px; z-index: 999; background: white; padding: 10px; border-radius: 8px;">
        <input id="wishlist-items" type="text" placeholder="Enter items (comma-separated)">
        <button id="add-wishlist">Add a wishlist</button>
    </div>

    <!-- ✅ Wishlist display tabs -->
    <div id="wishlist-tabs" style="position: absolute; top: 80px; left: 10px; z-index: 999; background: white; padding: 10px; border-radius: 8px; width: 300px; max-height: 70vh; overflow-y: auto;">
        <h3>Nearby Wishlists</h3>
        <div id="nearby-wishlists" class="wishlists"></div> <!-- ✅ added class -->

        <h3>My Requests</h3>
        <div id="my-wishlists" class="wishlists"></div> <!-- ✅ added class -->

        <h3>My Trips</h3>
        <div id="my-trips" class="wishlists"></div> <!-- ✅ added class -->
    </div>

    <!-- Mapbox JS -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.13.0/mapbox-gl.js'></script>
    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js'></script>

    <script>
        // Pass username from query param to JS
        window.USERNAME = "{{ request.GET.username|default:'' }}";
    </script>

    <!-- ✅ App scripts -->
    <script type="module" src="{% static 'home/js/helpers.js' %}"></script>
    <script type="module" src="{% static 'home/js/api.js' %}"></script>
    <script type="module" src="{% static 'home/js/wishlists.js' %}"></script>
    <script type="module" src="{% static 'home/js/index.js' %}"></script>
</body>
</html>
